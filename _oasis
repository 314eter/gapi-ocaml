OASISFormat: 0.2
OCamlVersion: >= 3.12.0
Name: gapi-ocaml
Version: 0.1
Synopsis: A simple OCaml client for Google Services.
Authors: Alessandro Strada
License: MIT
LicenseFile: LICENSE
Homepage: https://github.com/astrada/gapi-ocaml
BuildTools: ocamlbuild
Plugins: META (0.2)

# Flags
Flag all
  Description: Build all
  Default: false

Flag tests
  Description: Build and run tests
  Default$: flag(all)

Flag generator
  Description: Build service generator
  Default$: flag(all)

# Libraries
Library gapi
  Path: src/gapi
  Modules:
    GapiCore,
    GapiCurl,
    GapiPipe,
    GapiConfig,
    GapiConversation,
    GapiAuthResponse,
    GapiClientLogin,
    GapiOAuth1,
    GapiOAuth2,
    GapiAuth,
    GapiRequest,
    GapiMonad,
    GapiError,
    GapiService,
    GapiDate,
    GapiJson,
    GapiLens,
    GapiCalendarV3Model,
    GapiCalendarV3Service,
    GapiPlusV1Model,
    GapiPlusV1Service,
    GapiTasksV1Model,
    GapiTasksV1Service,
    GapiDiscoveryV1Model,
    GapiDiscoveryV1Service,
    GapiUrlshortenerV1Model,
    GapiUrlshortenerV1Service,
    GapiOauth2V2Model,
    GapiOauth2V2Service,
    GapiCustomsearchV1Model,
    GapiCustomsearchV1Service,
    GapiAnalyticsV3Model,
    GapiAnalyticsV3Service,
    GapiPagespeedonlineV1Model,
    GapiPagespeedonlineV1Service,
    GapiBloggerV2Model,
    GapiBloggerV2Service,
    GapiSiteVerificationV1Model,
    GapiSiteVerificationV1Service,
    GapiAdsenseV1_1Model,
    GapiAdsenseV1_1Service,
    GapiBigqueryV2Model,
    GapiBigqueryV2Service
  InternalModules:
    GapiUtils
  BuildDepends: extlib, netstring, curl, str, cryptokit, json-wheel, xmlm
  XMETADescription: Google APIs client library

Library gdata
  Path: src/gdata
  Modules:
    GdataCore,
    GdataBatch,
    GdataAtom,
    GdataACL,
    GdataCalendar,
    GdataComments,
    GdataCalendarEvent,
    GdataService,
    GdataCalendarService
  InternalModules:
    GdataUtils
  BuildDepends: gapi, xmlm, extlib, netstring, curl
  XMETADescription: Google Data Protocol (GData) client library

# Documentation
Document "gapi-ocaml"
  Title: API reference for Google APIs client library
  Type: ocamlbuild (0.2)
  InstallDir: $htmldir/html
  Install: false
  DataFiles: doc/style.css
  BuildTools: ocamldoc
  XOCamlbuildPath: src
  XOCamlbuildLibraries: gapi, gdata

# Executables
Executable serviceGenerator
  Build$: flag(generator) || flag(all)
  Path: tools
  Install: false
  MainIs: serviceGenerator.ml
  BuildDepends: gapi

# Examples
Executable oauth2Flow
  Path: examples/auth
  Install: false
  MainIs: oauth2Flow.ml
  BuildDepends: gapi, nethttpd

Executable oauth1Flow
  Path: examples/auth
  Install: false
  MainIs: oauth1Flow.ml
  BuildDepends: gapi, nethttpd

Executable clientLoginFlow
  Path: examples/auth
  Install: false
  MainIs: clientLoginFlow.ml
  BuildDepends: gapi, nethttpd

# Tests
Executable refreshOAuth2Token
  Build$: flag(tests) || flag(all)
  Path: src/test
  Install: false
  MainIs: refreshOAuth2Token.ml
  BuildDepends: gapi, oUnit

Executable testSuite
  Build$: flag(tests) || flag(all)
  Path: src/test
  Install: false
  MainIs: testSuite.ml
  BuildDepends: gapi, gdata, oUnit

Test core
  Run$: flag(tests) || flag(all)
  Command: $testSuite
  TestTools: testSuite

# VCS
SourceRepository head
  Type: git
  Location: https://github.com/astrada/gapi-ocaml.git
  Browser: https://github.com/astrada/gapi-ocaml
  Branch: master

